# Ironcliw v3.4.0 - Multi-Window Awareness Edition

## 🎉 Major Release: Full Workspace Intelligence

Ironcliw can now see and understand your ENTIRE workspace, not just a single window!

## 🪟 Key Features

### Multi-Window Detection
- Tracks 50+ windows simultaneously across all applications
- Understands window hierarchy and focus states
- Detects window relationships and workflows
- Works with complex multi-monitor developer setups

### Intelligent Queries
- **"What's on my screen?"** - Lists ALL open windows with app breakdown
- **"What am I working on?"** - Prioritizes and analyzes focused window
- **"Do I have any messages?"** - Checks all communication apps at once
- **"Are there any errors?"** - Scans all terminals and dev windows

### Performance
- Sub-second capture and analysis of multiple windows
- Smart resolution scaling (full for focused, optimized for background)
- Parallel processing with async architecture
- Efficient memory usage with intelligent caching

### Enhanced Responses
- Concise, focused answers without verbose preambles
- Clean formatting without numbered list artifacts
- Context-aware responses based on query type
- Improved Claude Vision integration

## 📝 Implementation Details

### New Components
- `window_detector.py` - macOS window detection using Quartz
- `multi_window_capture.py` - Parallel window capture system
- `workspace_analyzer.py` - Claude Vision workspace analysis
- `jarvis_workspace_integration.py` - Ironcliw voice integration

### Architecture
```
Voice Command → Ironcliw Agent → Workspace Intelligence
                                     ↓
                             Window Detection (50+ windows)
                                     ↓
                             Multi-Window Capture (<1s)
                                     ↓
                             Claude Vision Analysis
                                     ↓
                             Context-Aware Response
```

## 🚀 Usage Examples

```bash
You: "Hey Ironcliw, what's on my screen?"
Ironcliw: "Sir, you have 46 windows open: Terminal (focused), Cursor, Chrome, 
         Safari, Discord, Slack, and 10 more applications."

You: "What am I working on?"
Ironcliw: "Sir, you're working in Terminal on test_multi_window_phase1.py. 
         Also using: Cursor, Chrome."

You: "Do I have any messages?"
Ironcliw: "Sir, Discord and Slack are open but no new messages."

You: "Are there any errors?"
Ironcliw: "Sir, I detect error indicators in your Terminal window."
```

## 🔧 Technical Improvements

### Response Quality
- Removed verbose preambles like "Based on the information provided..."
- Fixed numbered list artifacts (1., 2., etc.) in responses
- Reduced Claude API token usage (500 → 150 max_tokens)
- Added smart response formatting based on query type

### Window Filtering
- Filters out system UI elements (Dock, Notification Center)
- Skips invisible and minimized windows
- Ignores very small windows (<100px)
- Handles off-screen windows gracefully

### Error Handling
- Fallback capture methods for Quartz API failures
- Empty sequence protection in grid creation
- Graceful handling of permission issues
- Comprehensive error logging

## 📋 Testing

Run the Phase 1 acceptance tests:
```bash
cd tests/vision
python test_multi_window_phase1.py
```

Expected results:
- ✅ Detects 40-50+ windows
- ✅ Captures multiple windows in <1s
- ✅ "What's on my screen?" includes all windows
- ✅ "What am I working on?" prioritizes focused window
- ✅ Responses are concise and focused

## 🎯 Future Enhancements (Phase 2)

- Window relationship detection
- Smart query routing
- Workflow learning
- Proactive insights
- Cross-window context understanding

## 🙏 Credits

This release represents a major breakthrough in AI workspace understanding, making Ironcliw the first AI assistant with true Multi-Window Workspace Intelligence!